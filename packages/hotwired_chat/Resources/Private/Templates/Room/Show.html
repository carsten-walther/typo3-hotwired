<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" xmlns:chat="http://typo3.org/ns/Walther/Chat/ViewHelpers" data-namespace-typo3-fluid="true">

<f:layout name="Default"/>

<f:section name="Main">

    <h2>Room</h2>

    <chat:turboStreamSource src="{f:uri.action(action: 'index', controller: 'EventStream')}" />

    <chat:turboFrame id="room">
        <p><strong>{room.name}</strong></p>
        <p><f:link.action action="edit" arguments="{room: room}">Edit</f:link.action> | <f:link.action action="delete" arguments="{room: room}" additionalAttributes="{'data-turbo-frame': '_top'}">Delete</f:link.action></p>
        <p><f:link.action action="list" additionalAttributes="{'data-turbo-frame': '_top'}">Back to list</f:link.action></p>
    </chat:turboFrame>

    <h2>Messages</h2>

    <f:render partial="Message/List" arguments="{messages: room.messages}"/>

    <chat:turboFrame id="new_message" src="{f:uri.action(action: 'new', controller: 'Message', arguments: '{room: room}')}" target="_top" />

</f:section>

</html>